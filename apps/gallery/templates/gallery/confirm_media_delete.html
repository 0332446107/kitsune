{# vim: set ts=2 et sts=2 sw=2: #}
{% extends "gallery/media.html" %}
{# L10n: {t} is the title of the media, {type} is image or video. #}
{% set title = _('Delete {type} | {t} | Media Gallery')|f(type=media_type, t=media.title) %}

{% block content %}
  <article id="media-object-delete" class="main">
    <div id="breadcrumbs">
      {{ _('You are here:') }}
      {{ breadcrumbs(crumbs) }}
    </div>
    <h1>{{ _('Are you sure you want to delete this {type}?')|f(type=media_type) }}</h1>
    <div class="to-delete">
      <label>{{ _('Title') }}</label>
      <div>{{ media.title }}</div>
      <label>{{ _('Description') }}</label>
      <div>{{ media.description|wiki_to_html }}</div>
      <label>{{ _('Creator') }}</label>
      <div>{{ media.creator }}</div>
      <label>{{ _('Date') }}</label>
      <div>{{ datetimeformat(media.created, format='longdatetime') }}</div>
      {% if media_type == 'video' %}
        <label>{{ _('Available formats') }}</label>
        <div>
          <ul>
            {% if media.flv %}
              <li>FLV</li>
            {% endif %}
            {% if media.ogv %}
              <li>OGV</li>
            {% endif %}
            {% if media.webm %}
              <li>WEBM</li>
            {% endif %}
          </ul>
        </div>
        <label class="clear">{{ _('Video') }}</label>
        <div>{{ generate_video(media) }}</div>
      {% else %}
        <label>{{ _('Available formats') }}</label>
        <div>{{ media_format|upper }}</div>
        <label>{{ _('Image') }}</label>
        <div><img src="{{ media.file.url }}" alt="{{ media.title }}" /></div>
      {% endif %}

      <form action="{{ url('gallery.delete_media', media_type, media.id) }}" method="post">
        {{ csrf() }}
        <p>
          {{ _('You are about to permanently delete this {type}. <strong>This cannot be undone!</strong> Are you sure you want to continue?')|fe(type=media_type) }}
        </p>
        <div class="form-actions">
          <a href="{{ url('gallery.media', media_type, media.id) }}">{{ _('Cancel') }}</a>
          <input type="submit" class="btn g-btn" value="{{ _('Delete') }}" />
        </div>
      </form>
    </div>
  </article>
{% endblock %}
