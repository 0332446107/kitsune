{# vim: set ts=2 et sts=2 sw=2: #}
{% extends "wiki/base.html" %}
{# L10n: {t} is the title of the document. {c} is the category. #}
{% set title = _('{t} | {c}')|f(t=document.title, c=document.get_category_display()) %}
{% set crumbs = [(url('wiki.category', document.category), document.get_category_display()),
                 (None, document.title)] %}
{% set classes = 'document' %}

{% block content %}
  <div id="breadcrumbs">
    {{ _('You are here:') }}
    {{ breadcrumbs(crumbs) }}
  </div>
  <h1>{{ document.title }}</h1>
  {% if redirected_from %}
    <div id="redirected-from">
      {{ _('(Redirected from <a href="{href}?redirect=no">{title}</a>)')|fe(href=redirected_from.get_absolute_url(), title=redirected_from.title) }}
    </div>
  {% endif %}
  {% if document.current_revision %}
    <div id="toc" class="hide-if-no-js" data-missing-msg="{{ missing_msg_json }}">
      <h2>{{ _("Table of Contents") }}</h2>
      <ol></ol>
    </div>
  {% endif %}
  {% include 'wiki/includes/support-for-selectors.html' %}
  <div id="doc-content">
    <article>
      {% if document.current_revision %}
        {{ document.html|safe }}
      {% else %}
        {{ _("This article doesn't have approved content yet.") }}
      {% endif %}
    </article>
  </div>
  <div id="more-help">
    <h2>{{ _("Couldn't find what you were looking for?") }}</h2>
    <ul>
      <li>
        {{ _('Browse a list of related articles:') }}
        {# TODO: insert list here #}
      </li>
      <li>
        {# TODO: insert url below #}
        {{ _('Browse other articles about <a href="{url}">{category}</a>')|fe(url='#', category=document.get_category_display()) }}
      </li>
      <li>
        {{ _('Try searching instead:') }}
        <form action="{{ url('search') }}" method="get">
          <input type="text" class="text" name="q" placeholder="{{ _('Search Mozilla Support') }}" required="required" />
          <input type="submit" class="submit" value="{{ _('Search') }}" />
        </form>
      </li>
      <li>
        {{ _('Ask your question to our helpful <a href="{url}">support community</a>.')|fe(url=url('questions.new_question')) }}
      </li>
    </ul>
  </div>
{% endblock %}
{% block sidebar %}
<ul class="common-actions" />
<ul class="uncommon-actions">
  {% if document.allows_revision_by(user) or document.allows_editing_by(user) %}
    <li>
      <a href="{{ url('wiki.edit_document', document_slug=document.slug) }}">Edit</a>
    </li>
  {% endif %}
  {% if user.is_authenticated() %}
    <li class="watch">
      {% if is_watching(document) %}
        <form action="{{ url('wiki.document_unwatch', document.slug) }}" method="post">
          {{ csrf() }}
          <input type="submit" class="submit" value="{{ _('Unsubscribe from edit notifications') }}" />
        </form>
      {% else %}
        <form action="{{ url('wiki.document_watch', document.slug) }}" method="post">
          {{ csrf() }}
          <input type="submit" class="submit" value="{{ _('Subscribe to edit notifications') }}" />
        </form>
      {% endif %}
    </li>
  {% endif %}
</ul>
{% endblock %}
